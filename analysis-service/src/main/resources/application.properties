# Application
spring.application.name=analysis-service
server.port=8082

# Database Configuration (PostgreSQL)
spring.datasource.url=jdbc:postgresql://${DB_HOST:postgres-db}:${DB_PORT:5432}/${DB_NAME:log_db}
spring.datasource.username=${DB_USER:user}
spring.datasource.password=${DB_PASSWORD:password}
spring.datasource.driver-class-name=org.postgresql.Driver

# JPA/Hibernate - auto create tables from entities
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false

# Kafka Configuration
spring.kafka.bootstrap-servers=${KAFKA_BOOTSTRAP_SERVERS:kafka:29092}
spring.kafka.consumer.group-id=${KAFKA_CONSUMER_GROUP:analysis-service-group}
spring.kafka.consumer.key-deserializer=org.apache.kafka.common.serialization.StringDeserializer
spring.kafka.consumer.value-deserializer=org.apache.kafka.common.serialization.StringDeserializer
spring.kafka.consumer.auto-offset-reset=earliest

# Kafka Topic Configuration
spring.kafka.topic.log-events=${KAFKA_TOPIC:log-events}

# Anomaly Detection Configuration
anomaly.error-threshold=${ANOMALY_ERROR_THRESHOLD:5}
anomaly.time-window-minutes=${ANOMALY_TIME_WINDOW:1}
anomaly.cooldown-minutes=${ANOMALY_COOLDOWN:5}

# Logging
logging.level.org.springframework.kafka=INFO
logging.level.com.loganomaly.detector=DEBUG